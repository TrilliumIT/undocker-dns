language: go
go:
- 1.11
env:
  global:
  - GO15VENDOREXPERIMENT=1
  - GOOS=linux
before_install:
- curl https://raw.githubusercontent.com/golang/dep/master/install.sh | sh
- dep ensure
install:
- go get -t ./...
script:
- mv $GOPATH/bin/undocker-dns ./
- md5sum undocker-dns > md5.txt
- md5sum undocker-dns.service >> md5.txt
- sha256sum undocker-dns > sha256.txt
- sha256sum undocker-dns.service >> sha256.txt
- sha512sum undocker-dns > sha512.txt
- sha512sum undocker-dns.service >> sha512.txt
deploy:
  provider: releases
  skip_cleanup: true
  api_key:
    secure: Swe4tq4W/23gq/x+2kMggVzUl4fQrPMFr3IMqWjzvbpSZQaF3R0/X6Qvc+ueV6HNnGbA1b+wLR8IDlqbQ0QL5lxk3OyT0FnlzPCe6hBlygZ3nau6h6Ng9qasAWndZMk6COunD8HcLsSAoXAh99sdq1SSf2HI0PUiZRInaG6ufmIgEFQYkO/4X9pnzo1cXGeIL2lQQeY2TdHhIn5IfG0nVhrUQZJPAEfnwMqPkaVCuHuV68YQ0fwa6UsH4QeRLj3izWZ6LEVsd52UWfcuGjt/zYfrtJdjNhy2DLN8x3XgN4S1c2NPZZSfTCdtld36LGXYlX4b7LHq3naVN+mxx1wO9USIzN5F99kxPtbjvINCxoCkeZkHsZ8FWx27EQzKZEa4yjkvT8LB5stNg+juMKwcAg6JjbXw04w968bLyflwokYA2R2EEN2wR9JoefUWZl9r10mwYs/F0ouerIovbRK92lbNZuQoM+c9avpxRG5kpFA2VO0LVQVyvvJ1r5EYLfD0yjfPDMw7XiWgWMCTP7hEt+x5yEtmSQr12HbsAkNpO6z1n8GsbUQq5nYddjvoAxhv27Z5DxImha4cNEF6C3M/6a3CwTGkzKeKaGSXcCsQqsOfckvCEpYh7X6wiFsJHQor0yuiI5HE0mGTnWepdeIlsWC4B/O5pKKuRJ4JCPWiwGc=
  file:
  - undocker-dns
  - undocker-dns.service
  - md5.txt
  - sha256.txt
  - sha512.txt
  on:
    tags: true
